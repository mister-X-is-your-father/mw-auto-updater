# PHP 8.4 Changes (from 8.3)
version = "8.4"
from = "8.3"

[[changes]]
type = "deprecation"
category = "syntax"
description = "Implicitly nullable parameter types are deprecated (use ?Type explicitly)"
description_ja = "暗黙的なnullable型パラメータが非推奨（?Typeを明示的に使用）"
pattern = 'function\s+\w+\s*\([^)]*\w+\s+\$\w+\s*=\s*null'
replacement = "Change 'Type $param = null' to '?Type $param = null'"

[[changes]]
type = "deprecation"
category = "ini"
description = "session.use_trans_sid INI setting is deprecated"
description_ja = "session.use_trans_sid INI設定が非推奨"
pattern = 'session\.use_trans_sid|use_trans_sid'
replacement = "Use cookies for session management"

[[changes]]
type = "deprecation"
category = "ini"
description = "session.use_only_cookies=0 is deprecated"
description_ja = "session.use_only_cookies=0 が非推奨"
pattern = 'session\.use_only_cookies'
replacement = "Keep session.use_only_cookies=1"

[[changes]]
type = "deprecation"
category = "class"
description = "DOMDocument and DOMEntity properties formally deprecated"
description_ja = "DOMDocument と DOMEntity のプロパティが正式に非推奨"
pattern = "DOMDocument|DOMEntity"
replacement = "Use modern DOM APIs"

[[changes]]
type = "deprecation"
category = "function"
description = "strtok() with empty string is deprecated"
description_ja = "空文字列での strtok() が非推奨"
pattern = 'strtok\s*\('
replacement = "Use explode() or preg_split() instead"

[[changes]]
type = "deprecation"
category = "function"
description = "Calling trigger_error() with E_USER_ERROR is deprecated"
description_ja = "E_USER_ERROR での trigger_error() が非推奨"
pattern = "trigger_error.*E_USER_ERROR"
replacement = "Throw an exception instead"

[[changes]]
type = "breaking"
category = "function"
description = "exit() and die() are now proper language constructs"
description_ja = "exit() と die() が正式な言語構造に変更"
pattern = 'exit\(|die\('
replacement = "No action needed, but behavior may differ with expressions"

[[changes]]
type = "deprecation"
category = "constant"
description = "E_STRICT constant is deprecated"
description_ja = "E_STRICT 定数が非推奨"
pattern = "E_STRICT"
replacement = "Remove E_STRICT from error reporting"

[[changes]]
type = "new"
category = "syntax"
description = "Property hooks (get/set) are now supported"
description_ja = "プロパティフック（get/set）がサポート"

[[changes]]
type = "new"
category = "syntax"
description = "Asymmetric visibility for properties (public private(set))"
description_ja = "プロパティの非対称可視性（public private(set)）"

[[changes]]
type = "new"
category = "function"
description = "New array_find(), array_find_key(), array_any(), array_all() functions"
description_ja = "新しい array_find(), array_find_key(), array_any(), array_all() 関数"

[[changes]]
type = "new"
category = "class"
description = "New #[Deprecated] attribute for userland deprecations"
description_ja = "ユーザー定義の非推奨を示す #[Deprecated] 属性"
